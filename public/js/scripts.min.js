var Bag=function(){this.addItem=function(a){localStorage[a]=!0},this.removeItem=function(a){localStorage[a]=!1},this.clearAll=function(a){a.preventDefault();for(var b in window.PRODUCTS)window.PRODUCTS[b].drop()}},PrintFrame=function(){var a=this;this.iframe=$("#print-frame")[0],this.refresh=function(){var b=new $.Deferred;return a.iframe.src=a.iframe.src,$(a.iframe).on("load",b.resolve),b.promise()},this.print=function(){a.iframe.contentWindow.print()}},Product=function(a){var b=this;this.container=a,this.trash=this.container.find(".remove"),this.ID=parseInt(this.container.attr("data-pid")),this.active=!1,this.construct=function(){b.container.on("click",b.take),b.trash.on("click",b.drop)},this.take=function(){b.container.addClass("selected"),b.active=!0,BAG.addItem(b.ID)},this.drop=function(){arguments.length&&arguments[0].stopPropagation(),b.container.removeClass("selected"),b.active=!1,BAG.removeItem(b.ID)},this.construct()},Trash=function(){var a=this;this.items=[],this.fill=function(){if(localStorage.length)for(var b=0;b<localStorage.length;b++){var c=parseInt(localStorage.key(b));if(!isNaN(c))if("true"===localStorage[c]){if(!(c in window.PRODUCTS)){a.items.push(c);continue}window.PRODUCTS[c].take()}else a.items.push(c)}},this.empty=function(){if(a.items.length||a.fill(),a.items.length)for(var b=0;b<a.items.length;b++)localStorage.removeItem(a.items[b])}};$(function(){window.PRODUCTS={},window.printFrame=new PrintFrame,window.BAG=new Bag,$("[data-pid]").each(function(){var a=$(this),b=parseInt(a.attr("data-pid"));window.PRODUCTS[b]=new Product($(this))}),$(".ui-notification").length&&$("#addProductForm [name=name]").focus(),$("#sidebar header .clear-all").on("click",window.BAG.clearAll),$("#sidebar .print a").on("click",function(a){a.preventDefault(),window.printFrame.refresh().done(function(){window.printFrame.print()})});var a=new Trash;a.empty()});
//# sourceMappingURL=scripts.min.js.map